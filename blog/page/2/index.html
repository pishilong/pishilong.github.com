
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>闻过则喜，见贤思齐  | 海岩咖啡的部落格</title>

<meta name="author" content="海岩咖啡">

<meta name="description" content="原本用kindeditor毫无压力，也算支持国产，但是无奈，为了整合数学公式编辑器，只能改用ckeditor或者tinyMCE这两个主流大哥。 而tinyMCE又与Rails不能很好集成，只有原生的插件。一没有gem，二不能上传文件。 于是改用比较成熟的ckeditor，整合rails相当方便， &hellip;"> <meta name="keywords" content="">

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="海岩咖啡的部落格" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script type="text/javascript" src="/javascripts/jquery.fancybox.pack.js"></script>

<script language="Javascript" type="text/javascript">
$(document).ready(
  function() {
    (function($) {
      $(".fancybox[data-content-id]").each(function() {
        this.href = $(this).data('content-id');
      });
      $(".fancybox").fancybox({
        beforeLoad: function() {
          var el, 
              id = $(this.element).data('title-id');

          if (id) {
            el = $('#' + id);

            if (el.length) {
              this.title = el.html();
            }
          }
          if ($(this).data('content')) {
            this.content = $(this).data('content');
          }
        },
        helpers: {
          title: {
            type: 'inside'
          }
        }
      });
    })(jQuery);
  }
);
</script>

	
</head>



<body>
	<header id="header" class="inner"><h1><a href="/">海岩咖啡的部落格</a></h1>
<h4>闻过则喜，见贤思齐</h4>
<nav id="main-nav"><ul>
	<li><a href="/">Blog</a></li>
	<li><a href="/archives">Archive</a></li>
  <li><a href="/blog/categories">Category</a></li>
  <li><a href="/blog/tags">Tag</a></li>
  <li><a href="/about">About</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul>
	<li><a href="/">Blog</a></li>
	<li><a href="/archives">Archive</a></li>
  <li><a href="/blog/categories">Category</a></li>
  <li><a href="/blog/tags">Tag</a></li>
  <li><a href="/about">About</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:pishilong.github.com">
			</form>
		</div>
	</div>
</nav>


</header>

	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/ckeditorde-ni-xi">
		
			Ckeditor的逆袭</a>
	</h2>
	<div class="entry-content">
		<p>原本用kindeditor毫无压力，也算支持国产，但是无奈，为了整合数学公式编辑器，只能改用ckeditor或者tinyMCE这两个主流大哥。</p>

<p>而tinyMCE又与Rails不能很好集成，只有原生的插件。一没有gem，二不能上传文件。</p>

<p>于是改用比较成熟的<a href="https://github.com/galetahub/ckeditor">ckeditor</a>，整合rails相当方便，上传等也一应俱全,还提供ActiveRecord, Mongid等持久化支持，和<a href="https://github.com/thoughtbot/paperclip">paperclip</a>,<a href="https://github.com/jnicklas/carrierwave">carrierwave</a>上传插件的支持。</p>

<pre><code>gem "ckeditor", "3.7.1"
rails generate ckeditor:install --orm=active_record --backend=paperclip
</code></pre>

<p>一直使用很顺畅，直到碰到两个很恶心的问题:</p>

<ul>
  <li>
    <p>ckeditor总会把内容自己套一层&lt;p&gt;标签</p>

    <p>这是因为ckeditor对于换行有三种模式，默认是&lt;p&gt;,改成br模式或者div模式即可解决问题，在config.js中加入:</p>
  </li>
</ul>
<div>
  <pre><code class="ruby">config.enterMode = CKEDITOR.ENTER_BR;
config.shiftEnterMode = CKEDITOR.ENTER_BR;</code></pre>
</div>

<ul>
  <li>
    <p>HTML里面本来&lt;table&gt;标签在<span>标签里面，在kindeditor里面，能正常显示在富文本编辑器里，但是ckeditor会自己把外面的<span>标签移除，然后内嵌到table里的文字周围。</span></span></p>

    <p>原本以为是ckeditor自己怪异的行为，然后几乎花了一天时间去看ckeditor的源码以及详细设置，使用了很多方案:</p>
  </li>
</ul>
<div>
  <pre><code class="ruby">config.removePlugins = 'scayt';
config.autoParagraph = false;
config.ignoreEmptyParagraph = false;</code></pre>
</div>

<p>都不行，后来在一个帖子里看到，span标签属于inline element,而table属于block element,从规范和合理的角度出发,block是不能内嵌到inline element的。
  所以ckeditor进行了检查并处理。确实在ckeditor的dtd中也对各类标签进行了定义</p>

<p>ckeditor总的来说还是很不错，但是体积比Kindeditor稍大，如果不是特别的需求，我会选择kindeditor.</p>

<p>下一篇着重讲下数学公式编辑器的集成，从官方的php移植到了rails上。</p>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-06-28T11:39:00+08:00" pubdate data-updated="true">2012年06月28日 11:39:00</time></div>
	

<div class="categories">

	<a class='category' href='/blog/categories/技术/'>技术</a>

</div>


  


	
		<span class="comments"><a href="/blog/ckeditorde-ni-xi/blog/page/2/index.html#disqus_thread">Comments</a></span>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/yi-shi-wei-jing">
		
			以史为镜</a>
	</h2>
	<div class="entry-content">
		<p>我记得”以史为镜”，因为一篇文章。</p>

<p>那是12年前，读初二的时候，当时有幸进入鲁迅文学院的少年作家班学习，在某一期的内部通讯上，看到一篇古怪题目的文章，叫《猫照镜》，详细的内容已经记不清了，但是记得他的写作手法有卡夫卡变形记的影子，用一个猫照镜这样的荒诞的而无意义的情景影射到了魏征身上，魏征劝谏唐太宗:以铜为镜可以正衣冠，以人为镜可以明得失，以史为镜可以知兴替。</p>

<p>家里不乏二月河写的历史小说，也有各类正史，野史，但是始终沉不下心。看到厚厚的一沓，总是有些心虚，尤其以前翻看资治通鉴时，看到一大堆的编年纪事，也觉得索然无味。</p>

<p>现在，努力地去在睡前用kindle去看《资治通鉴》，数月有余，只看了6%。看到汉武帝了。</p>

<p>总结起来，《资治通鉴》现在给我的感想就挺多了:</p>

<ol>
  <li>
    <p>博大精深。其中很多桥段，例如《触龙说赵太后》,《鸿门宴》,《谏逐客书》等，在看时，几乎都能背出来，但是现在去看才慢慢
体会到里面的智慧和精髓，回想以前摇头晃脑的背诵，多少感觉有些无意义，还不如把这功夫细心地去品读。不过这也是语文教育的通病，回想小学为了形式化的读书笔记，把各种不认识的词语作为优美词，把长句子抄下来，放到优美句里，就觉得好笑。这里,让我想起了高中的语文老师，张瑛，她讲课异常丰富多彩，入门三分，依然记得她讲触龙说赵太后时，还画出了碉堡和作战示意图，让我是真的领悟到了，迂回，侧面进攻的重要性。</p>
  </li>
  <li>
    <p>有些与中学学的历史相悖。例如焚书坑儒，记得初二学历史的时候，是把焚书坑儒和秦皇统一度量衡的大一统策略一起阐述的，映像中，是为了统一文化。但是在《资治通鉴》里，焚书不过是为了防止民众开化，而实行的愚民政策，而坑儒，也根本没有历史课上讲的惨烈，是有秦始皇原本尊敬尊敬的儒生，反过来嘲笑秦始皇，于是秦始皇就坑杀了200多个。这些东西也都无法去考证。</p>
  </li>
  <li>
    <p>为臣很艰辛。有人说看《资治通鉴》可以学到帝王之术，而我现在的感觉是，学到更多的是为臣的技巧。通篇大量地阐述各种人才，雄才，鬼才，如何劝谏，如何献策，如何说服帝王，协助帝王，成就自己。苏秦，张仪，一张嘴就能合纵连横，配六国相印。惊叹他们缜密的思维，和雄辩的口才。但也感慨，基本上大臣下场都很惨。要不功高盖主死得很惨，例如韩信，要不就是自己后来犯浑，李斯当初协助秦始皇
                                                                                                                 统一六国，无比厉害，但是后来，就战战栗栗，只为保住自己的丞相之位，唯唯诺诺，最终也被腰斩。
                                                                                                              时势造英雄，审时度势也是英雄的必备条件。不以无过为贤，而已改过为美。</p>
  </li>
  <li>
    <p>后宫确实不安宁，各种太后的势力祸乱人间。</p>
  </li>
</ol>

<p>看完汉武帝，就看《史记》，史记恰好讲到汉武帝元狩元年。</p>

<p>编年体到纪传体。都体会一下。</p>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-06-28T00:39:00+08:00" pubdate data-updated="true">2012年06月28日 00:39:00</time></div>
	

<div class="categories">

	<a class='category' href='/blog/categories/历史/'>历史</a>, <a class='category' href='/blog/categories/读书/'>读书</a>

</div>


  


	
		<span class="comments"><a href="/blog/yi-shi-wei-jing/blog/page/2/index.html#disqus_thread">Comments</a></span>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/sha-men">
		
			厦门</a>
	</h2>
	<div class="entry-content">
		<p>以“厦门”为题，一下笔，就不由自主地想说“厦门是我一直都想去的地方”。但是，却不是。</p>

<p>厦门，一直被广为传颂着，厦门的空气，鼓浪屿上的精致小店，各种适合步行的观光路线，美丽的海滩，漂亮的海岸线。但是这种铺天盖地的宣传和赞叹，让我不由得反感，哪怕真的如梦似幻。</p>

<p>以上烂俗的映像，是我对厦门下意识的感觉。</p>

<p>其次的感觉是，秦瑞林在厦大。</p>

<p>他是本科时候成绩最好的家伙，报送到了厦大计算机系，如果他成绩不好，那就天理不容了。原因有二：</p>

<p>其一，他学习态度实在是太好了，感觉时时刻刻都活在高考拼搏的岁月。开学第一天，他就能高高兴兴地左手拎着象征性的塑料袋，里面装着崭新的新课本，右手拎着代表性的硕大无比的水壶，去自习。由于习性的差异，基本和他难以照面，除了上课时间。</p>

<p>其二，他有一般成绩特别好的同学的一个共性，或多或少存在些癖好。例如塑料袋，例如水壶，例如无论早晚的一声“早上好”。一天之计在于晨，在他身上得到淋漓的体现。他就像早上八九点钟的太阳，时时刻刻都像朝阳般地绽放着自己的智慧，一次有一次地逼近满分。也毫无顾忌地在班级茶话会时，鄙视着大家，“如果我不是高三的
  时候看了200部电影，我就不会比高二参加高考考得还差，来到南师。”除了掌声，我不知道如何表达我的心情了。</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-06-24T22:45:00+08:00" pubdate data-updated="true">2012年06月24日 22:45:00</time></div>
	

<div class="categories">

	<a class='category' href='/blog/categories/生活/'>生活</a>

</div>


  


	
		<span class="comments"><a href="/blog/sha-men/blog/page/2/index.html#disqus_thread">Comments</a></span>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/qi-xing">
		
			骑行</a>
	</h2>
	<div class="entry-content">
		<p>今天骑了16KM+,当时不觉得累，现在大腿都是滚烫的。</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-06-23T01:26:00+08:00" pubdate data-updated="true">2012年06月23日 01:26:00</time></div>
	

<div class="categories">

	<a class='category' href='/blog/categories/生活/'>生活</a>

</div>


  


	
		<span class="comments"><a href="/blog/qi-xing/blog/page/2/index.html#disqus_thread">Comments</a></span>
	
</div>
</article>

<nav id="pagenavi">
    
        <a href="/" class="prev">Prev</a>
    
    
    <div class="center"><a href="/archives">Blog Archives</a></div>
</nav></div>
	<footer id="footer" class="inner">Copyright &copy; 2013

    海岩咖啡

<br>
Powered by Octopress.
</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'pishilong';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





</body>
</html>
